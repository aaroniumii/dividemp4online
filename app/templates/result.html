{% extends "base.html" %}
{% block content %}
  <section class="card">
    <h2>Split complete</h2>
    {% if metadata %}
      <p><strong>Original file:</strong> {{ metadata.original_filename }}</p>
      <p><strong>Number of parts:</strong> {{ metadata.parts }}</p>
    {% endif %}
    <p>The video has been divided. Download the parts below.</p>
    <ul class="file-list">
      {% for file in files %}
        <li>
          <a class="file-list__link" href="{{ url_for('download', job_id=job_id, filename=file) }}">{{ file }}</a>
        </li>
      {% endfor %}
    </ul>
    <div class="actions">
      <a class="button" href="{{ url_for('index') }}">Split another video</a>
    </div>
  </section>
{% endblock %}

{% block scripts %}
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const files = Array.from(document.querySelectorAll('.file-list__link')).map((link) => link.textContent);
      console.info('Result page loaded', {
        jobId: '{{ job_id }}',
        fileCount: files.length,
        files,
      });
    });
  </script>
{% endblock %}
